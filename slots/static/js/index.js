/*极客学院前端组*/
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),Animate=function(){function t(e){_classCallCheck(this,t),this.dom=e,this.startTime=0,this.startPos=0,this.endPos=0,this.property=null,this.easing=null,this.duration=null}return _createClass(t,[{"key":"run","value":function(t,e,n,o,r,s){var i=this;this.property=t,this.startPos=e,this.endPos=n,this.startTime=(new Date).getTime(),this.duration=o,this.easing=this._Tween(r);var a=setInterval(function(){!1===i._step()&&(clearInterval(a),s&&s()),i._step()},20)}},{"key":"_step","value":function(){var t=(new Date).getTime();if(t>=this.startTime+this.duration)return this._update(this.endPos),!1;var e=this.easing(t-this.startTime,this.startPos,this.endPos-this.startPos,this.duration);this._update(e)}},{"key":"_update","value":function(t){this.dom.style[this.property]=t+"px"}},{"key":"_Tween","value":function(t){return{"linear":function(t,e,n,o){return n*t/o+e},"easeIn":function(t,e,n,o){return n*(t/=o)*t+e},"easeOut":function(t,e,n,o){return-n*(t/=o)*(t-2)+e},"easeBoth":function(t,e,n,o){return(t/=o/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},"easeInStrong":function(t,e,n,o){return n*(t/=o)*t*t*t+e},"easeOutStrong":function(t,e,n,o){return-n*((t=t/o-1)*t*t*t-1)+e},"easeBothStrong":function(t,e,n,o){return(t/=o/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}}[t]}}]),t}(),Game=function(){function t(e){return _classCallCheck(this,t),"object"!==(void 0===e?"undefined":_typeof(e))?(console.error("参数错误"),!1):!e["dom"]&&!e["property"]&&e["startPos"]&&e["endPos"]?(console.error("缺乏必要参数"),!1):(this.counter=0,this.dom=e["dom"],this.property=e["property"],this.startPos=e["startPos"],this.endPos=e["endPos"],this.duration=e["duration"]?e["duration"]:500,this.easing=e["easing"]?e["easing"]:"linear",void(this.counts=e["counts"]?e["counts"]:10))}return _createClass(t,[{"key":"run","value":function(t,e){var n=this;if(!t)return console.error("缺乏必要参数"),!1;e&&"function"!=typeof e&&console.error("参数类型错误");var o=new Animate(this.dom);o.run(this.property,this.startPos,this.endPos,this.duration,this.easing,function(){if(n.counter++,n.counter>=n.counts)return n.counter=0,o.run(n.property,n.startPos,t,800,"easeOut"),e&&setTimeout(function(){e()},1200),!1;n.dom.style[n.property]=n.startPos+"px",n.run(t,e)})}}]),t}(),App=function(){function t(e){_classCallCheck(this,t);try{if(!e)throw new Error("params 对象缺失")}catch(t){alert(t)}this.params=e,this.game=[],this._gameInstance()}return _createClass(t,[{"key":"run","value":function(t,e){this.game.forEach(function(n,o){o===t.length-1?n.run(t[o],function(){e&&"function"==typeof e&&e()}):n.run(t[o])})}},{"key":"_gameInstance","value":function(){var t=this;this.params.forEach(function(e,n){t.game[n]=new Game(e)})}}]),t}(),app=new App([{"dom":document.getElementsByClassName("superheros-list01")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":5},{"dom":document.getElementsByClassName("superheros-list02")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":6},{"dom":document.getElementsByClassName("superheros-list03")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":7}]);window.lock=!1,document.getElementById("start").addEventListener("click",function(){if(!window.lock){window.lock=!0;var t=[10,10,10].map(function(t){return Math.floor(Math.random()*(t-1)+1)}).map(function(t){return 50-110*t});app.run(t,function(){!0===t.some(function(e){return e!==t[0]})?alert("很抱歉，没有中奖"):alert("恭喜中奖了！你可以去买彩票了！"),window.lock=!1})}});