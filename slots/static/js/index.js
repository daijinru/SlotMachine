/*极客学院前端组*/
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}(),Animate=function(){function t(e){_classCallCheck(this,t),this.validate=new VALIDATE({"property":"string.isRequired","startPos":"number.isRequired","endPos":"number.isRequired","duration":"number.isRequired","easing":"string.isRequired","callback":"function.notRequired","dom":"object.isRequired"}),this.validate.start({"dom":e}),this.dom=e,this.startTime=0,this.startPos=0,this.endPos=0,this.property=null,this.easing=null,this.duration=null}return _createClass(t,[{"key":"run","value":function(t,e,r,s,n,o){var i=this;this.validate.start({"property":t,"startPos":e,"endPos":r,"duration":s,"easing":n,"callback":o}),this.property=t,this.startPos=e,this.endPos=r,this.startTime=(new Date).getTime(),this.duration=s,this.easing=this._Tween(n);var a=setInterval(function(){!1===i._step()&&(clearInterval(a),o&&o()),i._step()},20)}},{"key":"_step","value":function(){var t=(new Date).getTime();if(t>=this.startTime+this.duration)return this._update(this.endPos),!1;var e=this.easing(t-this.startTime,this.startPos,this.endPos-this.startPos,this.duration);this._update(e)}},{"key":"_update","value":function(t){this.dom.style[this.property]=t+"px"}},{"key":"_Tween","value":function(t){return{"linear":function(t,e,r,s){return r*t/s+e},"easeIn":function(t,e,r,s){return r*(t/=s)*t+e},"easeOut":function(t,e,r,s){return-r*(t/=s)*(t-2)+e},"easeBoth":function(t,e,r,s){return(t/=s/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},"easeInStrong":function(t,e,r,s){return r*(t/=s)*t*t*t+e},"easeOutStrong":function(t,e,r,s){return-r*((t=t/s-1)*t*t*t-1)+e},"easeBothStrong":function(t,e,r,s){return(t/=s/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e}}[t]}}]),t}(),Game=function(){function t(e){_classCallCheck(this,t),this.validate=new VALIDATE({"obj":"object.isRequired","property":"string.isRequired","startPos":"number.isRequired","endPos":"number.isRequired","dom":"object.isRequired","targetPos":"number.isRequired","callback":"function.notRequired"}),this.validate.start({"obj":e,"dom":e["dom"],"property":e["property"],"startPos":e["startPos"],"endPos":e["endPos"]}),this.counter=0,this.dom=e["dom"],this.property=e["property"],this.startPos=e["startPos"],this.endPos=e["endPos"],this.duration=e["duration"]?e["duration"]:500,this.easing=e["easing"]?e["easing"]:"linear",this.counts=e["counts"]?e["counts"]:10}return _createClass(t,[{"key":"run","value":function(t,e){var r=this;this.validate.start({"targetPos":t,"callback":e});var s=new Animate(this.dom);s.run(this.property,this.startPos,this.endPos,this.duration,this.easing,function(){if(r.counter++,r.counter>=r.counts)return r.counter=0,s.run(r.property,r.startPos,t,800,"easeOut"),e&&setTimeout(function(){e()},1200),!1;r.dom.style[r.property]=r.startPos+"px",r.run(t,e)})}}]),t}(),VALIDATE=function(){function t(e){_classCallCheck(this,t),this.params=e}return _createClass(t,[{"key":"start","value":function(t){var e=this;Object.getOwnPropertyNames(t).forEach(function(r,s,n){var o=_typeof(t[r]),i=e.params[r].split(".")[0],a="isRequired"===e.params[r].split(".")[1],u=i===_typeof(t[r]),c=r+" type should be "+i+" but "+o,l=r+" isRequired!'";if(a&&!t[r])throw new Error(l);if(!u&&t[r])throw new Error(c)})}}]),t}(),App=function(){function t(e){var r=this;_classCallCheck(this,t),this.validate=new VALIDATE({"params":"object.isRequired","dom":"object.isRequired","property":"string.isRequired","startPos":"number.isRequired","endPos":"number.isRequired","targetPosArray":"object.isRequired","callback":"function.notRequired"}),e.forEach(function(t){r.validate.start({"params":t,"dom":t["dom"],"property":t["property"],"startPos":t["startPos"],"endPos":t["endPos"]})}),this.params=e,this.game=[],this._gameInstance()}return _createClass(t,[{"key":"run","value":function(t,e){this.validate.start({"targetPosArray":t,"callback":e}),this.game.forEach(function(r,s){s===t.length-1?r.run(t[s],function(){e&&"function"==typeof e&&e()}):r.run(t[s])})}},{"key":"_gameInstance","value":function(){var t=this;this.params.forEach(function(e,r){t.game[r]=new Game(e)})}}]),t}(),app=new App([{"dom":document.getElementsByClassName("superheros-list01")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":5},{"dom":document.getElementsByClassName("superheros-list02")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":6},{"dom":document.getElementsByClassName("superheros-list03")[0],"property":"top","startPos":-60,"endPos":-1050,"counts":7}]);window.lock=!1,document.getElementById("start").addEventListener("click",function(){if(!window.lock){window.lock=!0;var t=[10,10,10].map(function(t){return Math.floor(Math.random()*(t-1)+1)}).map(function(t){return 50-110*t});app.run(t,function(){!0===t.some(function(e){return e!==t[0]})?alert("很抱歉，没有中奖"):alert("恭喜中奖了！你可以去买彩票了！"),window.lock=!1})}});